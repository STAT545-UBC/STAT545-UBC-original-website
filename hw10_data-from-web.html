<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Andrew MacDonald" />


<title>Data from the Web - Homework</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68219208-1', 'auto');
  ga('send', 'pageview');

</script>



<link rel="stylesheet" href="libs/local/main.css" type="text/css" />
<link rel="stylesheet" href="libs/local/nav.css" type="text/css" />
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<header>
  <div class="nav">
    <a class="nav-logo" href="index.html">
      <img src="static/img/stat545-logo-s.png" width="70px" height="70px"/>
    </a>
    <ul>
      <li class="home"><a href="index.html">Home</a></li>
      <li class="faq"><a href="faq.html">FAQ</a></li>
      <li class="syllabus"><a href="syllabus.html">Syllabus</a></li>
      <li class="topics"><a href="topics.html">Topics</a></li>
      <li class="people"><a href="people.html">People</a></li>
    </ul>
  </div>
</header>

<div id="header">
<h1 class="title">Data from the Web - Homework</h1>
<h4 class="author"><em>Andrew MacDonald</em></h4>
</div>

<div id="TOC">
<ul>
<li><a href="#big-picture">Big picture</a></li>
<li><a href="#general-advice">General advice</a></li>
<li><a href="#please-just-tell-me-what-to-do">Please just tell me what to do!</a><ul>
<li><a href="#combine-gapminder-and-data-from-geonames">Combine <a href="https://github.com/jennybc/gapminder"><code>gapminder</code></a> and data from <a href="http://www.geonames.org/"><code>geonames</code></a></a></li>
</ul></li>
<li><a href="#but-im-tired-of-gdp">.. But I’m tired of GDP</a></li>
<li><a href="#i-want-to-aim-higher">I want to aim higher!</a></li>
<li><a href="#even-higher">even HIGHER</a></li>
<li><a href="#i-am-a-leaf-on-the-wind.-see-how-i-soar">I am a leaf on the wind. See how I SOAR</a><ul>
<li><a href="#due-date">Due date</a></li>
</ul></li>
<li><a href="#rubric">Rubric</a></li>
</ul>
</div>

<div id="big-picture" class="section level2">
<h2>Big picture</h2>
<p>We learned three ways of collecting data from the internet:</p>
<ul>
<li>Accessing data using <a href="https://ropensci.org">rOpenSci</a> packages that wrap APIs</li>
<li>Running (basic) API queries “by hand”</li>
<li>Web scraping</li>
</ul>
<p>For the homework, we want you to either</p>
<ul>
<li>combine two existing datasets in a novel (and reproducible!) way; at least one must come from the web</li>
<li>create a new dataset by web scraping</li>
</ul>
</div>
<div id="general-advice" class="section level2">
<h2>General advice</h2>
<p>Your procedure for obtaining and remixing data should be reproducible and, ideally, portable to your peer’s system (avoid <code>setwd()</code>!).</p>
<p>For example, if your process involves obtaining some records (countries, species) at random, provide either the list of things chosen (id numbers, country codes etc.) OR use <code>set.seed()</code> so that your peer can produce the same random sample.</p>
<p>Remember to protect your API key!</p>
<p>Be aware of rate limits on APIs when making repeated requests.</p>
<p>You can use several scripts/files to obtain your data. If you download lots of data, consider creating a pipeline with <code>make</code> or a <code>make</code>-like R script, so that you download the data only once!</p>
<p>Write and render an R Markdown document with a narrative of what you’ve done and why and the code that does it. What was most difficult? What are you most excited about in your future of getting data from the web?</p>
</div>
<div id="please-just-tell-me-what-to-do" class="section level2">
<h2>Please just tell me what to do!</h2>
<div id="combine-gapminder-and-data-from-geonames" class="section level3">
<h3>Combine <a href="https://github.com/jennybc/gapminder"><code>gapminder</code></a> and data from <a href="http://www.geonames.org/"><code>geonames</code></a></h3>
<p>Install the <code>geonames</code> package (on <a href="https://cran.r-project.org/web/packages/geonames/index.html">CRAN</a>, on <a href="https://github.com/ropensci/geonames">GitHub</a>). Make a user account (see the lecture notes) and use <code>geonames</code> to access data about the world’s countries. Use data from <code>geonames</code> and <code>gapminder</code> to investigate either of these questions:</p>
<ul>
<li>What is the relationship between per-capita GDP and the proportion of the population which lives in urban centers?</li>
<li>Consider the following graph of population against time (a modification of Jenny’s <a href="https://github.com/jennybc/gapminder">gapminder demo</a>):</li>
</ul>
<pre class="r"><code>library(&quot;ggplot2&quot;)
library(&quot;gapminder&quot;)

ggplot(subset(gapminder, continent != &quot;Oceania&quot;),
       aes(x = year, y = pop, group = country, color = country)) +
  geom_line(lwd = 1, show_guide = FALSE) + facet_wrap(~ continent) +
  scale_color_manual(values = country_colors) + theme_bw() +
  theme(strip.text = element_text(size = rel(1.1))) + scale_y_log10()</code></pre>
<pre><code>## Warning: `show_guide` has been deprecated. Please use `show.legend`
## instead.</code></pre>
<p><img src="hw10_data-from-web_files/figure-html/spaghetti-plot-pop-vs-year-1.png" alt="" /> </p>
<p>Replace population with <em>population density</em>. To do this, look up the country codes in <code>geonames()</code>, obtain the area of each country and compute density as population divided by area.</p>
<p><strong>TIP</strong> check out the handy package <a href="https://github.com/vincentarelbundock/countrycode">countrycode</a> to help you merge country names!</p>
</div>
</div>
<div id="but-im-tired-of-gdp" class="section level2">
<h2>.. But I’m tired of GDP</h2>
<p>We took quick looks at two other rOpenSci packages: <a href="https://github.com/ropensci/rebird"><code>rebird</code></a> and <a href="https://github.com/ropensci/rplos"><code>rplos</code></a>. Both packages are on CRAN and more info is on their GitHub repo READMEs. Find out what data are available from each, and combine them! Here are three suggestions:</p>
<ul>
<li><code>rplos</code> and <code>rebird</code> – how many articles are published on a bird species?</li>
<li><code>rplos</code> and <code>geonames</code> – Choose a subset of countries. How many papers have been published by people from that country? In that country? How does that relate to GDP?</li>
<li><code>rebird</code> and <code>geonames</code> – Do countries with more bird species also have more languages?</li>
</ul>
<p>For each of these tasks, produce an R Markdown report that illustrates how you obtained the data, how you processed it and successfully merged the two datasets. If you are downloading lots of data (or if you are worried about over-using an API) consider automating the process using <code>make</code>.</p>
</div>
<div id="i-want-to-aim-higher" class="section level2">
<h2>I want to aim higher!</h2>
<ul>
<li>Look through the ropenSci <a href="http://ropensci.org/packages/">packages list</a> and/or the <a href="https://cran.r-project.org/web/views/WebTechnologies.html">CRAN Task View on Web Technologies and Services</a>, find some existing resources, and remix those instead.</li>
</ul>
</div>
<div id="even-higher" class="section level2">
<h2>even HIGHER</h2>
<ul>
<li>Consult <a href="http://www.programmableweb.com/">Programmable Web</a> and the <a href="https://cran.r-project.org/web/views/WebTechnologies.html">CRAN Task View on Web Technologies and Services</a>, discover an API which is NOT wrapped for R (yet!) and write a function (or package!) to query it.</li>
</ul>
</div>
<div id="i-am-a-leaf-on-the-wind.-see-how-i-soar" class="section level2">
<h2>I am a leaf on the wind. See how I SOAR</h2>
<ul>
<li>Find an interesting website which is (a) <strong>not</strong> already wrapped for R and (b) <strong>does not</strong> have a published API. Scrape it into a clean, documented dataset. Look at the <a href="https://github.com/jennybc/gapminder/tree/master/data-raw">process of cleaning gapminder</a> or your own candy survey cleaning for inspiration/comfort.</li>
</ul>
<p>For example, in the class notes we scraped a dataset of research publications per country. Combine this with data on <a href="https://en.wikipedia.org/wiki/List_of_countries_by_research_and_development_spending">research spending per country</a>, and see if you can find a relationship.</p>
<div id="due-date" class="section level3">
<h3>Due date</h3>
<p>Your homework is due Friday 04 December 2015.</p>
</div>
</div>
<div id="rubric" class="section level2">
<h2>Rubric</h2>
<p>Peers will run each other’s code and try to get the same output. You’ll also be evaluated on the clarity and robustness of your workflow.</p>
<p>Recall the <a href="http://stat545-ubc.github.io/peer-review01_marking-rubric.html">general homework rubric</a>.</p>
</div>

<div class="footer">
This work is licensed under the  <a href="http://creativecommons.org/licenses/by-nc/3.0/">CC BY-NC 3.0 Creative Commons License</a>.
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
